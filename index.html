<!-- 	Template Authors: Stefan Lang, Eva Missoni - PLUS 
		Template Creation Date: March-June 2020 
		
		IMPORTANT NOTICES FOR USERS/AUTHORS: 
		SECTIONS TO BE EDITED BY AUTHORS ARE INDICATED AS FOLLOWS:  <!-- AUTHORS: DEFINE ... --> 
<!--	THE COMMANDS <section> and </section>  EMBRACE THE CONTENT FOR EACH SINGLE SLIDE.
		ALTERNATIVELY, YOU CAN USE MARKDOWN NOTATION TO CREATE YOUR SLIDES. More information: https://github.com/webpro/reveal-md 
		-->
		
		
<!doctype html>
<html prefix="eo4geo: http://bok.eo4geo.eu/" prefix="dc: http://purl.org/dc/terms/" lang="en" >

	<head>
		<meta charset="utf-8">
		 
		<title>Random Forests</title>
		
		<span property="dc:title">Classification: Random Forests</span>
		<span property="dc:creator">Mariana Belgiu and Anurag Kulshrestha, University of Twente</span>
		<span property="dc:subject">Random Forest</span>
		<span property="dc:abstract">Introduction to Random Forests</span>
		<span property="dc:tableOfContents">(1)Concept of ensemble classifiers; (2) Random Forests; (3) Random Forest hyperparameter; (4) Fundamental differences between tree growth on decision trees and Random Forest;
					Accuracy assessments in Random Forests</span>
		<span property="dc:desription">Learning objective: explain the advantanges of Random Forests over Decision Trees; describe the sensitivity of Random Forests to hyperparameters</span>
		<span property="dc:contributor">Mariana Belgiu</span>
		<span property="dc:created">2020-07-27</span>
		<span property="dc:type">Interactive Resource</span>
		<span property="dc:format">html</span>
		<span property="dc:language">EN</span>
		<span property="dc:SizeOrDuration">90 min</span>
		<span property="dc:audience">students</span>
		<span property="dc:educationLevel">EQF 6;</span>
		<span property="dc:source"> </span>
		<span property="dc:rightsHolder">Mariana Belgiu and Anurag Kulshrestha, University of Twente</span>
		<span property="dc:license">CC BY-SA 4.0</span>
		
		<meta property="dc:relation" content="eo4geo:TA7-5-1" />
		<meta property="dc:relation" content="eo4geo:TA7-5-2" />
		<meta property="dc:relation" content="eo4geo:GS3" />
		
		
		<link rel="stylesheet" href="internal_restricted/v1.0/css/reveal.css">
		<!-- CHOOSE BETWEEN 2 EO4GEO TEMPLATE THEMES:-->
		<link rel="stylesheet" href="internal_restricted/v1.0/css/theme/eo4geo.css" id="theme"> <!-- white background design --> 
		<link rel="stylesheet" href="internal_restricted/v1.0/plugin/markdown/css/theme/simplemenu.css">
		<!--<link rel="stylesheet" href="internal_restricted/v1.0/css/theme/eo4geo_grey.css" id="theme"> --> <!-- anthrazit background design --> 
		<!-- EO4GEO FONT ROBOTO SLAB -->
		<link href='https://fonts.googleapis.com/css?family=Roboto Slab' rel='stylesheet'> 
		<link rel="stylesheet" href="partnerLogo.css" id="theme"> 
		<link rel="stylesheet" href="customer_content/css/eo4geo_override.css" id="theme">

    <base target="_blank"> <!-- All links in the presentation are opened in a seperate tab"-->
 
	</head>

	<body>
		  
		<div class="reveal" >
		
			 <!-- FORMATTING FOR HEADER -->
			
					
				 <div class = "eo4geologo" style="width: 11%;height : 11%" ></div>	
			
				 <div class = "partnerlogo" style="width: 15%;height : 11%" ></div>		
				 <div  class = "presentation_title" style=" text-align: center " >Random Forests</div>	<!--The title of the presentation appears on each slide-->
				 

			<!-- AUTHORS: DEFINE METADATA FOR WHOLE SLIDESET HERE: (Dublin Core Metadata format, complemented by BoK-Concepts) >
				@prefix dc: <http://purl.org/dc/terms/>.
				@prefix eo4geo: <http://bok.eo4geo.eu/>.
				<>  	dc:title "Classification: Random Forests";
					dc:creator "Mariana Belgiu, University of Twente";
					dc:subject "Random Forest";
					dc:abstract "Introduction to Random Forests";
					dc:tableOfContents "(1)Concept of ensemble classifiers; (2) Random Forests; (3) Random Forest hyperparameter; (4) Fundamental differences between tree growth on decision trees and Random Forest;
					Accuracy assessments in Random Forests";
					dc:description "Learning objective: explain the advantanges of Random Forests over Decision Trees; describe the sensitivity of Random Forests to hyperparameters";
					dc:contributor "Mariana Belgiu";
					dc:created "2020-07-27";
					dc:type "InteractiveResource";
					dc:format "html";
					dc:language "EN"; 
					dc:SizeOrDuration "90min"
					dc:audience "students";
					dc:educationLevel "EQF 6";
					dc:source "";
					dc:rightsHolder "Mariana Belgiu, University of Twente";
					dc:license "CC BY-SA 4.0";
					dc:relation eo4geo:TA7-5-1;
					dc:relation eo4geo:TA7-5-2;
					dc:relation eo4geo:GS3 .	
								-->


				<div class="slides">
				
			
				<!-- AUTHORS: DEFINE CONTENT ON YOUR FIRST SLIDE --> 
				<section >
					<h1>Random Forests
					</h1>
					<!--!-- AUTHORS: PUT YOUR PRESENTER NOTES HERE: -->
				<aside class="notes">
					Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the speaker notes window (hit »S« on your keyboard).
				</aside>
				</section>
			
				<!-- AUTHORS: DEFINE SECTIONS WITHIN A SECTION TO GET VERTICAL SLIDES:--> 
				<section id="RF_1">
					<section > 
						<h2>What are ensemble classifiers?</h2> 
						<p>Combination of multiple <em>submodels</em> relying on the hypothesis that combining multiple "weak" predictor models together can often produce a powerful model</p>
					<br><img width="500" height="305" style="background-color: transparent; box-shadow: none;" data-src="resources\RandomForests\EnsembleClassifiers.png" alt="EnsembleClassifiers">
					</section>
					<section>
						<h2> How to create ensemble classifiers?</h2>
						<ul>
							<li style="color:#ea9b2d;">Bagging</li>
							<li style="color:#ea9b2d;">Boosting</li>
						</ul>
					</section>
					<section >	
					<h2> Ensemble of uncorrelated outcomes</h2>
					<p> Let's play: pick a random number (A) in range [1, 100].The outcome of the game is:</p>
					<ul>
							<li style="color:#ea9b2d;">Win if A > 40</li>
							<li style="color:#ea9b2d;">Loss otherwise</li>
						</ul>
					<p><b>Game 1: </b> place 100 times, betting $1 each time</p>
					<p><b>Game 2: </b> place 10 times, betting $10 each time</p>
					<p><b>Game 3: </b> place one time, betting $100</p>
					<p> We stimulate each game 10000 times. What do you expect?</p>
					</section>
					<section class="scrollable">
						<h2> Game results</h2>
					<br><img width="500" height="110" style="background-color: transparent; box-shadow: none;" data-src="resources\RandomForests\Games.png" alt="Example_1">
                    <br><img width="580" height="400" style="background-color: transparent; box-shadow: none;" data-src="resources\RandomForests\Games2.png" alt="Ecampe_2">					
						<p> Variance decreases as number of games increases</p>
					</section>
					
				</section>
					<!--Boostrap aggregation-->
					<section>
					<section>
						<h2>Bagging (Bootstrap Aggregating)</h2>
						<p>Suppose we use the same training algorithm for every predictor in the ensemble. However, to train them, we use different random subsets of the training set. When sampling of training data is done with replacement, it is called <em>bagging</em>.</p>
					<br><img width="520" height="280" style="background-color: transparent; box-shadow: none;" data-src="resources\RandomForests\Bagging.png" alt="Bagging_1">
					</section>	
					<section>
						<h2> How does this work?</h2>
						<p> Let's consider the following:</p>
						<ul>
							<li style="color:#ea9b2d;">N = number of samples in training set</li>
							<li style="color:#ea9b2d;">L = number of predictors</li>
							<li style="color:#ea9b2d;">TR = training set for each predictor</li>
							<li style="color:#ea9b2d;">TR<em>i</em> = sample of N randomly selected samples with replacement</li>
						</ul>
						<br><img width="520" height="300" style="background-color: transparent; box-shadow: none;" data-src="resources\RandomForests\Bagging2.png" alt="Bagging_2">
					</section>
					<section>
						<h2>Bagging of decision trees</h2>
						<p>What if these predictors are decision trees?</p>
						<br><img width="500" height="280" style="background-color: transparent; box-shadow: none;" data-src="resources\RandomForests\Bagging3.png" alt="Bagging_3">
					</section>
					
					</section>
					
					<!--Random Forests-->
					<section>
					<section>
						<h2>What is Random Forests?</h2>
						<ul>
							<li style="color:#ea9b2d;">It is an ensemble of decision trees</li>
							<li style="color:#ea9b2d;"> It grows many classification trees (n_estimators)</li>
							<li style="color:#ea9b2d;">Input vector goes through all the trees</li>
							<li style="color:#ea9b2d;">Each tree votes for a class for each input vector</li>
							<li style="color:#ea9b2d;">Class is chosen based on majority of votes</li>
						</ul>						
					</section>	
					<section>
						<h2> How an individual tree is grown?</h2>
						<p> From an <em>m</em> number of feature, a <em> max_features</em> are selected randomly at each node. Usually the number of features tested for spliting the tree nodes is represented by the square root of the total number of available features. Each node is split into two nodes only and there is no pruning</p>
					</section>
					<section>
						<h2>How is this procedure different from tree growing in Decision Trees?</h2>
					</section>
					
					</section>
					<!--Random Forests error rate-->
					<section>
					<section>
						<h2>Forest error rate</h2>
						<p> This is highly influenced by:</p>
						<ul>
							<li style="color:#ea9b2d;">Correlation between trees: increasing the correlation increases forest error rate</li>
							<li style="color:#ea9b2d;"> Strength of individual forest tree: increasing the tree strength decreases the forest error rate</li>
						</ul>						
					</section>
					<section>
						<h2>Forest error rate(2)</h2>
						<p>Correlation and strength are controlled by <em>max_features</em>. If max_features increases, both correlation between and strength of trees increase. Therefore, we have to find an optimal range of max_features.</p>
					</section>					
					</section>
					
					<!--Random Forests error rate-->
					
					<section>
						<h2>Features of Random Forests</h2>
						<p> The main features of Random Forests are listed below</p>
						<ul>
							<li style="color:#ea9b2d;">It runs efficiently on large data bases</li>
							<li style="color:#ea9b2d;">Not affected by the curse of dimensionality (Hughes phenomenon)</li>
							<li style="color:#ea9b2d;">It gives estimates of what variables are important in the classification</li>
							<li style="color:#ea9b2d;">It is distributed, i.e. each tree can run with a separate subset on a different machine</li>
						</ul>						
				
					</section>
					<!--Out of bag (oob) evaluation-->
					<section>
					<section>
						<h2>Out of bag (oob) evaluation</h2>
						<p> During bagging, approximately one-third of the data samples are left out of TR<em>i</em>. Why?</p>
						<img width="500" height="65" style="background-color: transparent; box-shadow: none;" data-src="resources\RandomForests\oob.png" alt="OOB_1">
						<br><p>These samples are called out-of-bag (oob) samples.</p>
						
					</section>
					<section>
						<h2>Why do we need oob?</h2>
						<p>OOB sample is used for estimating unbiased classification error (oob error estimate) and variable importance</p>
						<img width="500" height="300" style="background-color: transparent; box-shadow: none;" data-src="resources\RandomForests\oob2.png" alt="OOB_2">
					</section>
					<section>
						<h2>Unbiased oob error estimates</h2>
						<img width="400" height="400" style="background-color: transparent; box-shadow: none;" data-src="resources\RandomForests\oob3.png" alt="OOB_2">
					</section>						
					</section>
					<!--Variable importance-->
					<section>
						<h2>Variable importance</h2>
						<p> Let's consider <em>α</em> the number of votes cast for the correct class for all oob samples in all trees. If we permute values of variable <em>m</em> in the oob cases randomly and push them down the tree, then <em>avg(α−β) = raw VI (Variable Importance)</em> score for variable <em>m</em>.</p>
						<ul>
						<li style="color:#ea9b2d;">β = number of cases with correct classification</li>
						</ul>	
						
					</section>
					<!--Proximity-->
					<section>
						<h2>Proximities</h2>
						<p> Imagine that you send all training samples (including oob samples) down all trees, count the number of times when sample <em> n </em> and sample <em> k </em> are in the same terminal node and normalize by dividing it by number of trees. What does this tell you?</p>
					</section>
					<!--End-->
					
									
				<!-- AUTHORS: CREATE YOUR LIST OF REFERENCES HERE: -->
				<section> 
				<h2> Reference list </h2>
				<br>
				<reference_list>
				<br>Mather, P., & Tso, B. (2009). Classification methods for remotely sensed data (Second Edition), CRC Press
				<br>Richards, J. A. (2013). Remote Sensing Digital ImageAnalysis. In Springer. (Section 8.18)
				
				</reference_list>
				</section>
				
				
				<section>Slide show ends</section>
			
                </section>

              </div>


		<script src="internal_restricted/v1.0/js/reveal.js"></script>

		<script>

			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: './internal_restricted/v1.0/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: './internal_restricted/v1.0/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: './internal_restricted/v1.0/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: './internal_restricted/v1.0/plugin/notes/notes.js' },{ src: 'socket.io/socket.io.js', async: true },
					{ src: './internal_restricted/v1.0/plugin/notes-server/client.js', async: true }
					
				]
			});

		</script>
		
		<!-- rauslöschen?? -->
		<script>Reveal.initialize({
			simplemenu: {
				menuselector: '.menu a'
			},
			dependencies: [
				{ src: './internal_restricted/v1.0/plugin/markdown/assets/js/revealjs/plugin/simplemenu/simplemenu.js', async: false } 
			]
			});
		</script>

	</body>
</html>
